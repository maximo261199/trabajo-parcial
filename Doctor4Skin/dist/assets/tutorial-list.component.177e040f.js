import{h}from"./http-common.b8517154.js";import{_ as U,F as I,r as n,o as d,c,a as o,b as s,w as a,d as C,e as f,t as m,n as g,f as T,p as N,g as L}from"./index.03501aa5.js";class B{getAll(){return h.get("/tutorials")}getById(t){return h.get(`/tutorials/${t}`)}create(t){return h.post("/tutorials",t)}update(t,v){return h.put(`/tutorials/${t}`,v)}delete(t){return h.delete(`/tutorials/${t}`)}findByTitle(t){return h.get(`/tutorials?title=${t}`)}}const A={name:"tutorial-list",data(){return{tutorials:[],tutorialDialog:!1,deleteTutorialDialog:!1,deleteTutorialsDialog:!1,tutorial:{},selectedTutorials:null,filters:{},submitted:!1,statuses:[{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"}],tutorialsService:null}},created(){this.tutorialsService=new B,this.tutorialsService.getAll().then(e=>{this.tutorials=e.data,console.log(this.tutorials),this.tutorials.forEach(t=>this.getDisplayableTutorial(t)),console.log(this.tutorials)}),this.initFilters()},methods:{getDisplayableTutorial(e){return e.status=e.published?this.statuses[0].label:this.statuses[1].label,e},getStorableTutorial(e){return{id:e.id,title:e.title,description:e.description,published:e.status.label==="Published"}},openNew(){this.tutorial={},this.submitted=!1,this.tutorialDialog=!0},hideDialog(){this.tutorialDialog=!1,this.submitted=!1},findIndexById(e){return console.log(`current id: ${e}`),this.tutorials.findIndex(t=>t.id===e)},saveTutorial(){this.submitted=!0,this.tutorial.title.trim()&&(this.tutorial.id?(console.log(this.tutorial),this.tutorial=this.getStorableTutorial(this.tutorial),this.tutorialsService.update(this.tutorial.id,this.tutorial).then(e=>{console.log(e.data.id),this.tutorials[this.findIndexById(e.data.id)]=this.getDisplayableTutorial(e.data),this.$toast.add({severity:"success",summary:"Successful",detail:"Tutorial Updated",life:3e3}),console.log(e)})):(this.tutorial.id=0,console.log(this.tutorial),this.tutorial=this.getStorableTutorial(this.tutorial),this.tutorialsService.create(this.tutorial).then(e=>{this.tutorial=this.getDisplayableTutorial(e.data),this.tutorials.push(this.tutorial),this.$toast.add({severity:"success",summary:"Successful",detail:"Tutorial Created",life:3e3}),console.log(e)})),this.tutorialDialog=!1,this.tutorial={})},editTutorial(e){console.log(e),this.tutorial={...e},console.log(this.tutorial),this.tutorialDialog=!0},confirmDeleteTutorial(e){this.tutorial=e,this.deleteTutorialDialog=!0},deleteTutorial(){this.tutorialsService.delete(this.tutorial.id).then(e=>{this.tutorials=this.tutorials.filter(t=>t.id!==this.tutorial.id),this.deleteTutorialsDialog=!1,this.tutorial={},this.$toast.add({severity:"success",summary:"Successful",detail:"Tutorial Deleted",life:3e3}),console.log(e)})},exportToCSV(){this.$refs.dt.exportCSV()},confirmDeleteSelected(){this.deleteTutorialsDialog=!0},deleteSelectedTutorials(){this.selectedTutorials.forEach(e=>{this.tutorialsService.delete(e.id).then(t=>{this.tutorials=this.tutorials.filter(v=>v.id!==this.tutorial.id),console.log(t)})}),this.deleteTutorialsDialog=!1},initFilters(){this.filters={global:{value:null,matchMode:I.CONTAINS}}}}},b=e=>(N("data-v-2aa864cd"),e=e(),L(),e),M={class:"card"},F={class:"table-header flex flex-column md:flex-row md:justify-content-between"},E=b(()=>o("h5",{class:"mb-2 md:m-0 p-as-md-center text-xl"},"Manage Tutori",-1)),P={class:"p-input-icon-left"},R=b(()=>o("i",{class:"pi pi-search"},null,-1)),q={class:"field mt-3"},z={class:"p-float-label"},O=b(()=>o("label",{for:"title"},"Title",-1)),Y={key:0,class:"p-error"},j={class:"field"},K={class:"p-float-label"},G=b(()=>o("label",{for:"description"},"Description",-1)),H={class:"field"},J={key:0},Q={key:1},W={key:2},X={class:"confirmation-content"},Z=b(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),$={key:0},tt={class:"confirmation-content"},et=b(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),lt={key:0};function it(e,t,v,st,i,u){const r=n("pv-button"),k=n("pv-toolbar"),y=n("pv-input-text"),p=n("pv-column"),x=n("pv-tag"),D=n("pv-data-table"),S=n("pv-textarea"),w=n("pv-dropdown"),_=n("pv-dialog");return d(),c("div",null,[o("div",M,[s(k,{class:"mb-4"},{start:a(()=>[s(r,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:u.openNew},null,8,["onClick"]),s(r,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:u.confirmDeleteSelected,disabled:!i.selectedTutorials||!i.selectedTutorials.length},null,8,["onClick","disabled"])]),end:a(()=>[s(r,{label:"Export",icon:"pi pi-download",class:"p-button-help",onClick:t[0]||(t[0]=l=>u.exportToCSV(l))})]),_:1}),s(D,{ref:"dt",value:i.tutorials,selection:i.selectedTutorials,"onUpdate:selection":t[2]||(t[2]=l=>i.selectedTutorials=l),dataKey:"id",paginator:!0,rows:10,filters:i.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} tutorials",responsiveLayout:"scroll"},{header:a(()=>[o("div",F,[E,o("span",P,[R,s(y,{modelValue:i.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>i.filters.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:a(()=>[s(p,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),s(p,{field:"id",header:"Id",sortable:!0,style:{"min-width":"12rem"}}),s(p,{field:"title",header:"Title",sortable:!0,style:{"min-width":"16rem"}}),s(p,{field:"description",header:"Description",sortable:!0,style:{"min-width":"16rem"}}),s(p,{field:"status",header:"Status",sortable:!0,style:{"min-width":"12rem"}},{body:a(l=>[l.data.status==="Published"?(d(),C(x,{key:0,severity:"success"},{default:a(()=>[f(m(l.data.status),1)]),_:2},1024)):(d(),C(x,{key:1,severity:"info"},{default:a(()=>[f(m(l.data.status),1)]),_:2},1024))]),_:1}),s(p,{exportable:!1,style:{"min-width":"8rem"}},{body:a(l=>[s(r,{icon:"pi pi-pencil",class:"p-button-text p-button-rounded",onClick:V=>u.editTutorial(l.data)},null,8,["onClick"]),s(r,{icon:"pi pi-trash",class:"p-button-text p-button-rounded",onClick:V=>u.confirmDeleteTutorial(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),s(_,{visible:i.tutorialDialog,"onUpdate:visible":t[6]||(t[6]=l=>i.tutorialDialog=l),style:{width:"450px"},header:"Tutorial Information",modal:!0,class:"p-fluid"},{footer:a(()=>[s(r,{label:"Cancel".toUpperCase(),icon:"pi pi-times",class:"p-button-text",onClick:u.hideDialog},null,8,["label","onClick"]),s(r,{label:"Save".toUpperCase(),icon:"pi pi-check",class:"p-button-text",onClick:u.saveTutorial},null,8,["label","onClick"])]),default:a(()=>[o("div",q,[o("span",z,[s(y,{type:"text",id:"title",modelValue:i.tutorial.title,"onUpdate:modelValue":t[3]||(t[3]=l=>i.tutorial.title=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":i.submitted&&!i.tutorial.title})},null,8,["modelValue","class"]),O,i.submitted&&!i.tutorial.title?(d(),c("small",Y,"Title is required.")):T("",!0)])]),f(" /////////////////////////////////////////////////////////////// "),o("div",j,[o("span",K,[s(S,{id:"description",modelValue:i.tutorial.description,"onUpdate:modelValue":t[4]||(t[4]=l=>i.tutorial.description=l),required:"false",rows:"2",cols:"20"},null,8,["modelValue"]),G])]),o("div",H,[s(w,{id:"published",modelValue:i.tutorial.status,"onUpdate:modelValue":t[5]||(t[5]=l=>i.tutorial.status=l),options:i.statuses,optionLabel:"label",placeholder:"Select a Status"},{value:a(l=>[l.value&&l.value.value?(d(),c("div",J,[o("span",{class:g("tutorial-badge status-"+l.value.value)},m(l.value.label),3)])):l.value&&!l.value.value?(d(),c("div",Q,[o("span",{class:g("tutorial-badge status-"+l.value.toLowerCase())},m(l.value),3)])):(d(),c("span",W,m(l.placeholder),1))]),_:1},8,["modelValue","options"])])]),_:1},8,["visible"]),s(_,{visible:i.deleteTutorialDialog,"onUpdate:visible":t[8]||(t[8]=l=>i.deleteTutorialDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[s(r,{label:"No".toUpperCase(),icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=l=>i.deleteTutorialDialog=!1)},null,8,["label"]),s(r,{label:"Yes".toUpperCase(),icon:"pi pi-check",class:"p-button-text",onClick:u.deleteTutorial},null,8,["label","onClick"])]),default:a(()=>[o("div",X,[Z,i.tutorial?(d(),c("span",$,[f("Are you sure you want to delete "),o("b",null,m(i.tutorial.title),1),f("?")])):T("",!0)])]),_:1},8,["visible"]),s(_,{visible:i.deleteTutorialsDialog,"onUpdate:visible":t[10]||(t[10]=l=>i.deleteTutorialsDialog=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[s(r,{label:"No".toUpperCase(),icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=l=>i.deleteTutorialsDialog=!1)},null,8,["label"]),s(r,{label:"Yes".toUpperCase(),icon:"pi pi-check",class:"p-button-text",onClick:u.deleteSelectedTutorials},null,8,["label","onClick"])]),default:a(()=>[o("div",tt,[et,i.tutorial?(d(),c("span",lt,"Are you sure you want to delete the selected tutorials?")):T("",!0)])]),_:1},8,["visible"])])}const rt=U(A,[["render",it],["__scopeId","data-v-2aa864cd"]]);export{rt as default};
